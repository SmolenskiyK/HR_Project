<div class="grid-block">
   <div class="medium-2 grid-block">
      <div class="sidebar report-sidebar">
         <div class="card-divider">
            <div class="grid-block">
               <div class="medium-8 grid-block" ng-bind="::'REPORTS.REPORT_CONDITIONS' | translate"></div>
               <div class="medium-4 grid-block align-right">
                  <a ng-click="clear()" ng-bind="::'COMMON.CLEAR' | translate"></a>
               </div>
            </div>
         </div>
         <div class="card-section">
            <form>
               <label ng-bind="::'REPORTS.DATE_RANGE' | translate"></label>
               <div class="grid-block">
                  <div class="medium-6 grid-block">
                     <input type="text" placeholder="{{::'COMMON.FROM' | translate}}" ng-model="usersReportParametrs.startDate" class="input-date" datetime-picker date-format="dd-MM-yyyy" close-on-select="true" date-only/> </div>
                  <div class="medium-6 grid-block">
                     <input type="text" placeholder="{{::'COMMON.TO' | translate}}" ng-model="usersReportParametrs.endDate" class="input-date" datetime-picker date-format="dd-MM-yyyy" close-on-select="true" date-only/> </div>
               </div>
               <div class="grid-block">
                  <label ng-bind="::'THESAURUSES.LOCATIONS' | translate"></label>&nbsp;
                  <input ng-value="isActiveLocationField" type="checkbox" ng-model="isActiveLocationField" ng-change="useLocationField(isActiveLocationField)" ng-checked="isActiveLocationField"> </div>
               <div ng-if="isActiveLocationField" class="grid-block" ng-repeat="location in locations">
                  <div class="small-2 grid-block">
                     <input ng-value="location" ng-change="addLocationIdsToUsersReportParametrs(location)" ng-checked="location.selected" ng-model="location.selected" id="location" type="checkbox"> </div>
                  <div class="small-10 grid-block">
                     <label for="location" ng-bind="location.title"></label>
                  </div>
               </div>
               <div class="grid-block">
                  <label ng-bind="::'COMMON.USERS' | translate"></label>&nbsp;
                  <input ng-value="isActiveUsersField" type="checkbox" ng-model="isActiveUsersField" ng-checked="isActiveUsersField" ng-change="useUserField(isActiveUsersField)"> </div>
               <div ng-if="isActiveUsersField" class="grid-block" ng-repeat="user in users | filter: isEqualLocations">
                  <div class="small-2 grid-block">
                     <input ng-value="user" ng-change="addUserIdsToUsersReportParametrs(user)" ng-checked="user.selected" ng-model="user.selected" id="user" type="checkbox"> </div>
                  <div class="small-10 grid-block">
                     <label for="user" ng-bind="::(user.lastName+' '+user.firstName)"></label>
                  </div>
               </div>
               <a class="expand button" ng-click="formingUsersReport()" ng-bind="::'REPORTS.GENERATE' | translate"></a>
            </form>
         </div>
      </div>
   </div>
   <div class="vertical medium-10 grid-block">
      <div class="main-card">
         <div class="card-divider" ng-bind="::'REPORTS.USER_REPORT_CHART' | translate"> </div>
         <div class="card-section"> </div>
      </div>
      <div class="main-card">
         <div class="card-divider" ng-bind="::'REPORTS.USER_REPORT_DATA' | translate"> </div>
         <div class="card-section">
            <table class="report-data">
               <thead>
                  <tr ng-if="selectedLocations.length" class="report-data-row">
                     <th ng-bind="::'COMMON.LOCATION' | translate"></th>
                     <th ng-bind="::'COMMON.USERS' | translate"></th>
                     <th ng-bind="::'COMMON.ADDED' | translate" colspan="2"></th>
                     <th ng-repeat="stage in stages | orderBy:'$index':true" ng-bind="stage.title" colspan="2"></th>
                  </tr>
               </thead>
               <tbody ng-if="selectedLocations.includes(location)" ng-repeat="location in locations">
                  <tr class="report-data-row">
                     <td>
                        <div ng-bind="location.title"></div>
                     </td>
                     <td>
                        <div ng-if="selectedUsersGroupedByLocation" ng-repeat="user in selectedUsersGroupedByLocation[location.id]" ng-bind="::(user.lastName+' '+user.firstName)"></div>
                     </td>
                     <td>
                        <div ng-repeat="user in selectedUsersGroupedByLocation[location.id]">3</div>
                     </td>
                     <td>
                        <div>12</div>
                     </td>
                     <td>
                        <div ng-repeat="user in selectedUsersGroupedByLocation[location.id]">1</div>
                     </td>
                     <td>
                        <div>12</div>
                     </td>
                     <td>
                        <div ng-repeat="user in selectedUsersGroupedByLocation[location.id]">1</div>
                     </td>
                     <td>
                        <div>12</div>
                     </td>
                     <td>
                        <div ng-repeat="user in selectedUsersGroupedByLocation[location.id]">1</div>
                     </td>
                     <td>
                        <div>12</div>
                     </td>
                     <td>
                        <div ng-repeat="user in selectedUsersGroupedByLocation[location.id]">1</div>
                     </td>
                     <td>
                        <div>12</div>
                     </td>
                     <td>
                        <div ng-repeat="user in selectedUsersGroupedByLocation[location.id]">1</div>
                     </td>
                     <td>
                        <div>12</div>
                     </td>
                     <td>
                        <div ng-repeat="user in selectedUsersGroupedByLocation[location.id]">1</div>
                     </td>
                     <td>
                        <div>12</div>
                     </td>
                     <td>
                        <div ng-repeat="user in selectedUsersGroupedByLocation[location.id]">1</div>
                     </td>
                     <td>
                        <div>12</div>
                     </td>
                     <td>
                        <div ng-repeat="user in selectedUsersGroupedByLocation[location.id]">1</div>
                     </td>
                     <td>
                        <div>12</div>
                     </td>
                     <td>
                        <div ng-repeat="user in selectedUsersGroupedByLocation[location.id]">1</div>
                     </td>
                     <td>
                        <div>12</div>
                     </td>
                     <td>
                        <div ng-repeat="user in selectedUsersGroupedByLocation[location.id]">1</div>
                     </td>
                     <td>18</td>
                     <td>
                        <div ng-repeat="user in selectedUsersGroupedByLocation[location.id]">1</div>
                     </td>
                     <td>
                        <div>12</div>
                     </td>
                     <td>
                        <div ng-repeat="user in selectedUsersGroupedByLocation[location.id]">1</div>
                     </td>
                     <td>
                        <div>12</div>
                     </td>
                     <td>
                        <div ng-repeat="user in selectedUsersGroupedByLocation[location.id]">1</div>
                     </td>
                     <td>
                        <div>12</div>
                     </td>
                     <!--
                     <td ng-repeat="stage in stages">
                        <div ng-repeat="user in selectedUsersGroupedByLocation[location.id]">1</div>
                     </td>
-->
                  </tr>
               </tbody>
               <thead ng-if="!selectedLocations.length">
                  <tr class="report-data-row">
                     <th ng-bind="::'COMMON.USERS' | translate"></th>
                     <th ng-bind="::'COMMON.ADDED' | translate"></th>
                     <th ng-repeat="stage in stages | orderBy:'$index':true" ng-bind="stage.title"></th>
                  </tr>
               </thead>
               <tbody>
                  <tr ng-repeat="user in selectedUsers" class="report-data-row">
                     <td>
                        <div ng-bind="::(user.lastName+' '+user.firstName)"></div>
                     </td>
                     <td>
                        <div>3</div>
                     </td>
                     <td ng-repeat="stage in stages">
                        <div>3</div>
                     </td>
                  </tr>
               </tbody>
            </table>
         </div>
      </div>
   </div>
</div>