<div class="errorMessage" ng-bind="message" ng-disabled="!message"></div>
<table>
   <caption ng-bind="::thesaurusNameLabel"></caption>
   <tr><th ng-repeat="field in ::fields" ng-bind="::field.label"></th><th></th><th></th></tr>
   <tr ng-repeat = "topic in topics">
    <form name="topic.form">
      <td ng-repeat = "field in ::fields" >
         <img ng-show="!isEditTopic(topic)&&field.type==='img'">
         <input name="{{field.name}}" type="text" ng-disabled="!isEditTopic(topic)" ng-show="field.type==='text'" 
                placeholder="{{::field.name}}" ng-model="topic[field.name]" class="edit"
                validator="{{field.validator}}">
         <select name="{{field.name}}" ng-disabled="!isEditTopic(topic)" ng-show="field.type==='select'" 
                 ng-model="topic[field.refObject]"
                 ng-options="option[field.labelRefFieldName] for option in additionThesaurusesStore[field.refTo] track by option.id"
                 ng-change="change(topic, field)" class="edit" validator="required"></select>
          <img ng-src="{{::topic[field.name]}}" ng-show="field.type==='img'" class="thesaurus">
      </td>
      <td>
         <a href='#' class="button button-with-input" ng-show="!isEditTopic(topic)" 
            ng-click="editThesaurusTopic(topic)" 
            ng-disabled="!isTopicEditAllow(topic)" ng-bind="'COMMON.EDIT' | translate">
          </a>
         <a href='#' class="button button-with-input" ng-show="isEditTopic(topic)" 
            ng-click="saveEditTopic(topic)" ng-bind="::'COMMON.SAVE' | translate">
          </a>
      </td>
      <td>
         <a href='#' class="button button-with-input" ng-show="!isEditTopic(topic)" 
            ng-click="removeThesaurusTopic(topic)" ng-disabled="!isTopicEditAllow(topic)" 
            ng-bind="::'COMMON.REMOVE' | translate">
          </a>
         <a href='#' class="button button-with-input" ng-show="isEditTopic(topic)" 
            ng-click="cancelThesaurusTopicEditing(topic)" ng-bind="::'COMMON.CANCEL' | translate">
          </a>
      </td>
   </form>
   </tr>
   <tr>
      <form name="newTresaurusTopic.form">
      <td ng-repeat = "field in ::fields" >
          <input name="{{field.name}}" type="text" placeholder="{{::field.name}}" 
                ng-model="newTresaurusTopic[field.name]"
                ng-show="::field.type=='text'" ng-disabled="!isTopicEditAllow(newTresaurusTopic)">
          <select ng-show="field.type==='select'" name="{{field.name}}"
                 ng-model="newTresaurusTopic[field.refObject]"
                 ng-options="option[field.labelRefFieldName] for option in additionThesaurusesStore[field.refTo] track by option.id"
                 ng-change="change(newTresaurusTopic, field)"></select>
      </td>
      <td class="add">
         <a class="button button-with-input" ng-click="addNewTopic(newTresaurusTopic)" 
            ng-disabled="!isTopicEditAllow(newTresaurusTopic)" ng-bind="'COMMON.ADD' | translate">
          </a>
      </td>
      <td></td>
      </form>
   </tr>
</table>
